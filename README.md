# Clearsight

[[_TOC_]]

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

## Domain business

### System

```mermaid
classDiagram
    class System
    System : +String name
    System : +SystemHealthStatus healthStatus
    System : +SystemComponents components
    System : +getName()
```

### Component


```mermaid
classDiagram
    class Component
    Component : +String description
    Component : +ComponentHealthStatus healthStatus
    Component : +String id
    Component : +String message
    Component : +String name
```

### Log

```mermaid
classDiagram
    class Log
    Log : +string clientIp
    Log : +LogError error
    Log : +LogLevel level
    Log : +string message
    Log : +string processId
    Log : +LogRequest
    Log : +LogResponse
    Log : +Date timestamp
```

### Event

```mermaid
classDiagram
    class Event
    Event : +EventData data
    Event : +number position
    Event : +string streamId
    Event : +Date timestamp
    Event : +EventType type
```

## List of components

### The system component

Provide the name of the system.

### The system viewer component

Display a summary of the state of the system: its name and the list of the components with their health status.

### The logManager component

Handle the logs: catch, record and read the logs.

### The eventManager component

Handle the events: catch, record and read the events.

### The healthInspector component

Collect all components present in the system and check their health status.

Provide all components with their health status.

## Context map

### Component initialization

```mermaid
graph LR
    A[Component N] -- execute --> B(Init method) -- send --> D((Init event)) -- catch --> E[HealthInspector component] -- execute -->  F(Record method)
    D -- catch --> G[EventManager component] -- execute --> H(Record method)
    B -- execute --> X(Send Log method) -- request --> Y[LogComponent] -- execute --> Z(Record method)
```

### Healthcheck of the components

```mermaid
graph TD
    E[EventManager component] -- execute --> F(Record event method)
    A[HealthInspector component] -- execute --> B(Check method) -- send --> D((Check event request)) -- catch --> E 
    B -- request --> G[Component N] -- response --> H[HealthInspector component] -- execute --> I(Record method) -- send --> J((Check event response)) -- catch --> E
```

### View of a the system component

```mermaid
graph TD
    E[EventManager component] -- execute --> F(Record event method)
    A[SystemViewer component] -- execute --> B(View method) -- send --> D((System view event)) -- catch --> E 
    H[SystemViewer component] -- execute --> I(Aggregate method) -- display --> J(client)
    B -- request --> G[System Component] -- response --> H
    B -- request --> K[HealthInspector Component] -- response --> H
```